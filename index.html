<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle Financeiro Pessoal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <div id="app" class="p-4 md:p-8">
        <div class="max-w-7xl mx-auto">
            
            <!-- Header -->
            <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
                <h1 class="text-3xl font-bold text-gray-800 mb-2">üí∞ Controle Financeiro</h1>
                <p class="text-gray-600">Gerencie suas finan√ßas de forma simples e eficiente</p>
            </div>

            <!-- Cards de Resumo -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                <div class="bg-white rounded-xl shadow-md p-6 border-l-4 border-green-500">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-600 text-sm mb-1">Total de Entradas</p>
                            <p id="totalEntradas" class="text-2xl font-bold text-green-600">R$ 0,00</p>
                        </div>
                        <div class="bg-green-100 p-3 rounded-full">
                            <svg class="text-green-600" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
                                <polyline points="17 6 23 6 23 12"></polyline>
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-md p-6 border-l-4 border-red-500">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-600 text-sm mb-1">Total de Sa√≠das</p>
                            <p id="totalSaidas" class="text-2xl font-bold text-red-600">R$ 0,00</p>
                        </div>
                        <div class="bg-red-100 p-3 rounded-full">
                            <svg class="text-red-600" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="23 18 13.5 8.5 8.5 13.5 1 6"></polyline>
                                <polyline points="17 18 23 18 23 12"></polyline>
                            </svg>
                        </div>
                    </div>
                </div>

                <div id="saldoCard" class="bg-white rounded-xl shadow-md p-6 border-l-4 border-blue-500">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-600 text-sm mb-1">Saldo</p>
                            <p id="saldo" class="text-2xl font-bold text-blue-600">R$ 0,00</p>
                        </div>
                        <div class="bg-blue-100 p-3 rounded-full">
                            <svg class="text-blue-600" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="12" y1="1" x2="12" y2="23"></line>
                                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Filtros -->
            <div class="bg-white rounded-xl shadow-md p-6 mb-6">
                <div class="flex flex-wrap gap-4 items-end">
                    <div class="flex-1 min-w-[200px]">
                        <label class="block text-sm font-medium text-gray-700 mb-2">üìÖ M√™s</label>
                        <select id="filterMonth" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="todos">Todos os meses</option>
                            <option value="0">Janeiro</option>
                            <option value="1">Fevereiro</option>
                            <option value="2">Mar√ßo</option>
                            <option value="3">Abril</option>
                            <option value="4">Maio</option>
                            <option value="5">Junho</option>
                            <option value="6">Julho</option>
                            <option value="7">Agosto</option>
                            <option value="8">Setembro</option>
                            <option value="9">Outubro</option>
                            <option value="10">Novembro</option>
                            <option value="11">Dezembro</option>
                        </select>
                    </div>

                    <div class="flex-1 min-w-[200px]">
                        <label class="block text-sm font-medium text-gray-700 mb-2">üí± Tipo</label>
                        <select id="filterType" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="todos">Todos</option>
                            <option value="entrada">Entradas</option>
                            <option value="saida">Sa√≠das</option>
                        </select>
                    </div>

                    <div class="flex-1 min-w-[200px]">
                        <label class="block text-sm font-medium text-gray-700 mb-2">üè∑Ô∏è Categoria</label>
                        <select id="filterCategory" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="todas">Todas</option>
                        </select>
                    </div>

                    <button onclick="clearFilters()" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors">
                        ‚ùå Limpar
                    </button>

                    <button onclick="showAddForm()" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium">
                        ‚ûï Nova Transa√ß√£o
                    </button>
                </div>
            </div>

            <!-- Formul√°rio -->
            <div id="formContainer" class="bg-white rounded-xl shadow-md p-6 mb-6 border-2 border-blue-200 hidden">
                <h2 id="formTitle" class="text-xl font-bold text-gray-800 mb-4">‚ûï Nova Transa√ß√£o</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Data</label>
                        <input type="date" id="inputData" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Tipo</label>
                        <select id="inputTipo" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="entrada">üí∞ Entrada</option>
                            <option value="saida">üí∏ Sa√≠da</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Descri√ß√£o</label>
                        <input type="text" id="inputDescricao" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Ex: Compra no supermercado">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Categoria</label>
                        <select id="inputCategoria" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="">Selecione...</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Valor (R$)</label>
                        <input type="number" step="0.01" id="inputValor" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="0,00">
                    </div>

                    <div class="flex gap-2 items-end">
                        <button onclick="saveTransaction()" class="flex-1 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium">
                            üíæ Salvar
                        </button>
                        <button onclick="cancelForm()" class="px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors">
                            Cancelar
                        </button>
                    </div>
                </div>
            </div>

            <!-- Tabela -->
            <div class="bg-white rounded-xl shadow-md overflow-hidden">
                <div class="p-6 border-b border-gray-200">
                    <h2 class="text-xl font-bold text-gray-800">
                        üìã Transa√ß√µes (<span id="transactionCount">0</span>)
                    </h2>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Data</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Descri√ß√£o</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Categoria</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tipo</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Valor</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="transactionsList" class="bg-white divide-y divide-gray-200">
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="mt-8 text-center text-gray-600 text-sm">
                <p>üí° Dica: Use os filtros para encontrar transa√ß√µes espec√≠ficas rapidamente!</p>
            </div>
        </div>
    </div>

    <script>
        let transactions = [];
        let editingId = null;
        
        const categorias = [
            'Alimenta√ß√£o', 'Transporte', 'Moradia', 'Sa√∫de', 'Educa√ß√£o',
            'Lazer', 'Vestu√°rio', 'Sal√°rio', 'Freelance', 'Investimentos', 'Outros'
        ];

        // Inicializar
        function init() {
            // Dados de exemplo
            transactions = [
                { id: 1, data: '2025-01-05', descricao: 'Sal√°rio', categoria: 'Sal√°rio', tipo: 'entrada', valor: 5000 },
                { id: 2, data: '2025-01-10', descricao: 'Aluguel', categoria: 'Moradia', tipo: 'saida', valor: 1500 },
                { id: 3, data: '2025-01-15', descricao: 'Supermercado', categoria: 'Alimenta√ß√£o', tipo: 'saida', valor: 450 },
                { id: 4, data: '2025-01-20', descricao: 'Combust√≠vel', categoria: 'Transporte', tipo: 'saida', valor: 300 }
            ];

            // Preencher categorias
            const selectCategoria = document.getElementById('inputCategoria');
            const filterCategoria = document.getElementById('filterCategory');
            
            categorias.forEach(cat => {
                selectCategoria.innerHTML += `<option value="${cat}">${cat}</option>`;
                filterCategoria.innerHTML += `<option value="${cat}">${cat}</option>`;
            });

            // Data atual
            document.getElementById('inputData').value = new Date().toISOString().split('T')[0];

            // Event listeners
            document.getElementById('filterMonth').addEventListener('change', applyFilters);
            document.getElementById('filterType').addEventListener('change', applyFilters);
            document.getElementById('filterCategory').addEventListener('change', applyFilters);

            renderTransactions();
        }

        function formatCurrency(value) {
            return new Intl.NumberFormat('pt-BR', {
                style: 'currency',
                currency: 'BRL'
            }).format(value);
        }

        function formatDate(date) {
            return new Date(date + 'T00:00:00').toLocaleDateString('pt-BR');
        }

        function getFilteredTransactions() {
            let filtered = [...transactions];
            
            const filterMonth = document.getElementById('filterMonth').value;
            const filterType = document.getElementById('filterType').value;
            const filterCategory = document.getElementById('filterCategory').value;

            if (filterMonth !== 'todos') {
                filtered = filtered.filter(t => {
                    const month = new Date(t.data + 'T00:00:00').getMonth();
                    return month === parseInt(filterMonth);
                });
            }

            if (filterType !== 'todos') {
                filtered = filtered.filter(t => t.tipo === filterType);
            }

            if (filterCategory !== 'todas') {
                filtered = filtered.filter(t => t.categoria === filterCategory);
            }

            return filtered;
        }

        function updateSummary() {
            const filtered = getFilteredTransactions();
            
            const totalEntradas = filtered
                .filter(t => t.tipo === 'entrada')
                .reduce((sum, t) => sum + t.valor, 0);

            const totalSaidas = filtered
                .filter(t => t.tipo === 'saida')
                .reduce((sum, t) => sum + t.valor, 0);

            const saldo = totalEntradas - totalSaidas;

            document.getElementById('totalEntradas').textContent = formatCurrency(totalEntradas);
            document.getElementById('totalSaidas').textContent = formatCurrency(totalSaidas);
            document.getElementById('saldo').textContent = formatCurrency(saldo);

            // Atualizar cores do saldo
            const saldoCard = document.getElementById('saldoCard');
            const saldoText = document.getElementById('saldo');
            
            if (saldo >= 0) {
                saldoCard.className = 'bg-white rounded-xl shadow-md p-6 border-l-4 border-blue-500';
                saldoText.className = 'text-2xl font-bold text-blue-600';
            } else {
                saldoCard.className = 'bg-white rounded-xl shadow-md p-6 border-l-4 border-orange-500';
                saldoText.className = 'text-2xl font-bold text-orange-600';
            }
        }

        function renderTransactions() {
            const filtered = getFilteredTransactions();
            const tbody = document.getElementById('transactionsList');
            
            document.getElementById('transactionCount').textContent = filtered.length;

            if (filtered.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="6" class="px-6 py-8 text-center text-gray-500">
                            Nenhuma transa√ß√£o encontrada. Adicione uma nova transa√ß√£o para come√ßar!
                        </td>
                    </tr>
                `;
            } else {
                const sorted = filtered.sort((a, b) => new Date(b.data) - new Date(a.data));
                
                tbody.innerHTML = sorted.map(t => `
                    <tr class="hover:bg-gray-50 transition-colors">
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${formatDate(t.data)}</td>
                        <td class="px-6 py-4 text-sm text-gray-900">${t.descricao}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                            <span class="px-2 py-1 bg-gray-100 rounded-full text-xs">${t.categoria}</span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm">
                            <span class="px-3 py-1 rounded-full text-xs font-medium ${
                                t.tipo === 'entrada' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'
                            }">
                                ${t.tipo === 'entrada' ? 'üí∞ Entrada' : 'üí∏ Sa√≠da'}
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-bold ${
                            t.tipo === 'entrada' ? 'text-green-600' : 'text-red-600'
                        }">
                            ${formatCurrency(t.valor)}
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm">
                            <div class="flex gap-2">
                                <button onclick="editTransaction(${t.id})" class="p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors" title="Editar">
                                    ‚úèÔ∏è
                                </button>
                                <button onclick="deleteTransaction(${t.id})" class="p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors" title="Excluir">
                                    üóëÔ∏è
                                </button>
                            </div>
                        </td>
                    </tr>
                `).join('');
            }

            updateSummary();
        }

        function showAddForm() {
            editingId = null;
            document.getElementById('formTitle').textContent = '‚ûï Nova Transa√ß√£o';
            document.getElementById('inputData').value = new Date().toISOString().split('T')[0];
            document.getElementById('inputDescricao').value = '';
            document.getElementById('inputCategoria').value = '';
            document.getElementById('inputTipo').value = 'saida';
            document.getElementById('inputValor').value = '';
            document.getElementById('formContainer').classList.remove('hidden');
        }

        function cancelForm() {
            document.getElementById('formContainer').classList.add('hidden');
            editingId = null;
        }

        function saveTransaction() {
            const data = document.getElementById('inputData').value;
            const descricao = document.getElementById('inputDescricao').value;
            const categoria = document.getElementById('inputCategoria').value;
            const tipo = document.getElementById('inputTipo').value;
            const valor = parseFloat(document.getElementById('inputValor').value);

            if (!data || !descricao || !categoria || !valor) {
                alert('Por favor, preencha todos os campos!');
                return;
            }

            if (editingId) {
                // Editar
                const index = transactions.findIndex(t => t.id === editingId);
                transactions[index] = { id: editingId, data, descricao, categoria, tipo, valor };
            } else {
                // Adicionar
                const newTransaction = {
                    id: Date.now(),
                    data,
                    descricao,
                    categoria,
                    tipo,
                    valor
                };
                transactions.push(newTransaction);
            }

            cancelForm();
            renderTransactions();
        }

        function editTransaction(id) {
            const transaction = transactions.find(t => t.id === id);
            editingId = id;
            
            document.getElementById('formTitle').textContent = '‚úèÔ∏è Editar Transa√ß√£o';
            document.getElementById('inputData').value = transaction.data;
            document.getElementById('inputDescricao').value = transaction.descricao;
            document.getElementById('inputCategoria').value = transaction.categoria;
            document.getElementById('inputTipo').value = transaction.tipo;
            document.getElementById('inputValor').value = transaction.valor;
            document.getElementById('formContainer').classList.remove('hidden');
        }

        function deleteTransaction(id) {
            if (confirm('Tem certeza que deseja excluir esta transa√ß√£o?')) {
                transactions = transactions.filter(t => t.id !== id);
                renderTransactions();
            }
        }

        function applyFilters() {
            renderTransactions();
        }

        function clearFilters() {
            document.getElementById('filterMonth').value = 'todos';
            document.getElementById('filterType').value = 'todos';
            document.getElementById('filterCategory').value = 'todas';
            renderTransactions();
        }

        // Inicializar ao carregar a p√°gina
        window.onload = init;
    </script>
</body>
</html>
